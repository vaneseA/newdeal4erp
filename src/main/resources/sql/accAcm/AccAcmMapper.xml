<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.happyjob.study.accAcm.dao.AccAcmDao">

    <!-- 목록 조회 -->
    <select id="accmanagementlist" resultType="kr.happyjob.study.accAcm.model.AccManagementModel">
        SELECT am.acnt_sbject_cd
        ,am.acnt_sbject_name
        ,ds.acnt_dt_sbject_cd
        ,ds.acnt_dt_sbjct_name
        ,ds.acnt_dt_sbjct_inout
        FROM tb_dt_sbject ds
        INNER JOIN tb_acnt_sbject am on am.acnt_sbject_cd =  ds.acnt_sbject_cd
    </select> 

    <!-- 한건 조회 -->
    <select id="accmanagementselectone" resultType="kr.happyjob.study.accAcm.model.AccManagementModel">
        SELECT am.acnt_sbject_cd
        ,am.acnt_sbject_name
        ,ds.acnt_dt_sbject_cd
        ,ds.acnt_dt_sbjct_name
        ,ds.acnt_dt_sbjct_inout
        FROM tb_dt_sbject ds
        INNER JOIN tb_acnt_sbject am on am.acnt_sbject_cd =  ds.acnt_sbject_cd            
    </select> 
    
    <!-- 등록 -->
    <insert id="accmanagementinsert">
        <selectKey resultType="int" keyProperty="no" order="BEFORE">
            SELECT ifnull(max(splr_no),0) + 1 FROM tb_accmanagement
        </selectKey>   
        INSERT INTO tb_accmanagement
        (
            acnt_sbject_cd
            ,acnt_sbject_name
            ,acnt_dt_sbject_cd
            ,acnt_dt_sbjct_name
            ,acnt_dt_sbjct_inout
        )
        VALUES (
            #{acccombo} 
            ,#{acnt_sbject_name}
            ,#{accdcombo}
            ,#{acnt_dt_sbjct_name}
            ,#{acnt_dt_sbjct_inout}
        )       
    </insert> 
    
    <!--  수정 -->
    <update id="accmanagementupdate">
        UPDATE tb_accmanagement
        SET acnt_sbject_cd = #{acccombo} 
        ,acnt_sbject_name = #{acnt_sbject_name}
        ,acnt_dt_sbject_cd = #{accdcombo}
        ,acnt_dt_sbjct_name = #{acnt_dt_sbjct_name}
        ,acnt_dt_sbjct_inout = #{acnt_dt_sbjct_inout}
    </update>
    
    <!-- 납품기업 삭제 -->
    <delete id="accmanagementdelete">
        DELETE FROM tb_accmanagement
    </delete> 

</mapper>